(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{16:function(e,t,n){e.exports=n(28)},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var l=n(0),o=n.n(l),a=n(4),i=n.n(a),r=n(2),c=n(12),s=n(13),m=n(7),d=n.n(m),u=n(14),b="FETCH_POSTS",p="DELETE_ALL",E="DISPLAY_COMMENTS",f="DELETE_BOOK",h="ADD_COMMENT";function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={books:[],comments:{isHidden:!0,isDeleted:!1,isAllDeleted:!1,index:null,_id:"no id",title:"no title",comments:[]}};var v=Object(r.c)({totalState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return y({},e,{books:t.payload});case p:case E:case f:case h:return y({},e,{comments:t.payload});default:return e}}}),S=[c.a],w=Object(r.e)(v,{},Object(r.d)(r.a.apply(void 0,S))),O=n(5),j=n(10);n(27);function D(e){var t=e.addBook,n=Object(l.useState)(""),a=Object(j.a)(n,2),i=a[0],r=a[1];return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i&&(t(i),r(""))}},o.a.createElement("input",{type:"text",placeholder:"New Book Title",value:i,onChange:function(e){return r(e.target.value)}}),o.a.createElement("br",null),o.a.createElement("button",{style:{width:"148px",height:"25px"}},"Submit New Book!")))}function C(e){var t=e.books,n=e.comments,a=e.addComment,i=e.deleteBook,r=e.deleteAllBooks,c=Object(l.useState)(""),s=Object(j.a)(c,2),m=s[0],d=s[1];return n.isHidden?o.a.createElement("div",null,o.a.createElement("div",{style:{borderStyle:"solid",borderWidth:"thin",padding:"5px"}},o.a.createElement("p",null,"Select a book to see it's details and comments")),o.a.createElement("br",null),o.a.createElement("button",{onClick:function(){return r()}},"Delete all books...")):n.isAllDeleted?o.a.createElement("div",null,o.a.createElement("div",{style:{borderStyle:"solid",borderWidth:"thin",padding:"5px"}},o.a.createElement("p",null,"All books deleted")),0!==t.length&&o.a.createElement("button",{onClick:function(){return r()}},"Delete all books...")):o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("b",null,n.title)," (id: ".concat(n._id,")")),n.isDeleted?o.a.createElement("div",null,o.a.createElement("div",{style:{borderStyle:"solid",borderWidth:"thin"}},o.a.createElement("p",null,"delete successful"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("p",null,"Refresh the page")),o.a.createElement("button",{onClick:function(){return r()}},"Delete all books...")):o.a.createElement("div",null,o.a.createElement("div",{style:{borderStyle:"solid",borderWidth:"thin",padding:"5px"}},o.a.createElement("ol",null,n.comments.map((function(e,t){return o.a.createElement("li",{key:t},e)}))),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m&&(a(m,n._id),console.log("test"),d(""))}},o.a.createElement("input",{type:"text",placeholder:"New Comment",value:m,onChange:function(e){return d(e.target.value)}}),o.a.createElement("br",null),o.a.createElement("button",{style:{width:"148px",height:"25px"}},"Add Comment")),o.a.createElement("button",{style:{width:"148px",height:"25px"},onClick:function(){return i(n._id)}},"Delete Book")),o.a.createElement("br",null),o.a.createElement("button",{onClick:function(){return r()}},"Delete all books...")),o.a.createElement("div",null))}function x(e){var t=e.index,n=e.book,l=e.dispComments;return o.a.createElement("div",null,o.a.createElement("div",{className:"BooksDisplay"},o.a.createElement("ul",null,o.a.createElement("li",{onClick:function(){return l(t)}},n.title," - ".concat(n.comments.length," comments")))))}var _=Object(O.b)((function(e){return{books:e.totalState.books,comments:e.totalState.comments}}),{fetchBooks:function(){return function(e){function t(){return(t=Object(u.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/books");case 2:t.sent.json().then((function(t){return e({type:b,payload:t})})).catch((function(e){return console.log(e)}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}},dispComments:function(e){return function(t){var n={isHidden:!1,isDeleted:!1,isAllDeleted:!1,index:e,_id:w.getState().totalState.books[e]._id,title:w.getState().totalState.books[e].title,comments:w.getState().totalState.books[e].comments};t({type:E,payload:n})}},deleteAllBooks:function(){return function(e){fetch("/api/books",{method:"DELETE"}).then((function(e){return e.json()})).then((function(t){console.log(t);e({type:p,payload:{isHidden:!1,isDeleted:!1,isAllDeleted:!0,index:null,_id:"no id",title:"no title",comments:[]}})}))}},deleteBook:function(e){return function(t){var n=new URL(window.location.origin+"/api/books/"+e);fetch(n,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e);var n={isHidden:!1,isDeleted:!0,isAllDeleted:!1,index:w.getState().totalState.comments.index,_id:w.getState().totalState.comments._id,title:w.getState().totalState.comments.title,comments:w.getState().totalState.comments.comments};t({type:f,payload:n})}))}},addComment:function(e,t){return function(n){var l=new URL(window.location.origin+"/api/books/"+t);fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,comment:e})}).then((function(e){return e.json()})).then((function(e){console.log(e)}));var o=w.getState().totalState.comments.comments;console.log(o),o.push(e),console.log(o);var a={isHidden:!1,isDeleted:!1,isAllDeleted:!1,index:w.getState().totalState.comments.index,_id:w.getState().totalState.comments._id,title:w.getState().totalState.comments.title,comments:o};n({type:h,payload:a})}}})((function(e){var t=e.books,n=e.comments,a=e.fetchBooks,i=e.dispComments,r=e.deleteAllBooks,c=e.deleteBook,s=e.addComment;return Object(l.useEffect)((function(){a()})),o.a.createElement("div",{className:"App"},o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("h1",null,"Personal Library "),o.a.createElement("h3",{style:{color:"gray"}},"FreeCodeCamp Apis And Microservices Project 03 - MERN stack version")),o.a.createElement("h2",null,"User Stories"),o.a.createElement("ol",null,o.a.createElement("li",null,"Nothing from my website will be cached in my client as a security measure."),o.a.createElement("li",null,"I will see that the site is powered by 'PHP 4.2.0' even though it isn't as a security measure."),o.a.createElement("li",null,"I can ",o.a.createElement("b",null,"post")," a ",o.a.createElement("code",null,"title")," to /api/books to add a book and returned will be the object with the ",o.a.createElement("code",null,"title")," and a unique",o.a.createElement("code",null,"_id"),"."),o.a.createElement("li",null,"I can ",o.a.createElement("b",null,"get")," /api/books to retrieve an aray of all books containing ",o.a.createElement("code",null,"title"),", ",o.a.createElement("code",null,"_id"),", &",o.a.createElement("code",null,"commentcount"),"."),o.a.createElement("li",null,"I can ",o.a.createElement("b",null,"get")," /api/books/[_id] to retrieve a single object of a book containing ",o.a.createElement("code",null,"title"),", ",o.a.createElement("code",null,"_id"),", & an array of",o.a.createElement("code",null,"comments")," (empty array if no comments present)."),o.a.createElement("li",null,"I can ",o.a.createElement("b",null,"post")," a ",o.a.createElement("code",null,"comment")," to /api/books/[_id] to add a comment to a book and returned will be the books object similar to",o.a.createElement("b",null,"get")," /api/books/[_id]."),o.a.createElement("li",null,"I can ",o.a.createElement("b",null,"delete")," /api/books/[_id] to delete a book from the collection. Returned will be 'delete successful' if successful."),o.a.createElement("li",null,"If I try to request a book that doesn't exist I will get a 'no book exists' message."),o.a.createElement("li",null,"I can send a ",o.a.createElement("b",null,"delete")," request to /api/books to delete all books in the database. Returned will be 'complete delete successful' if successful."),o.a.createElement("li",null,"All 6 functional tests required are completed and passing (3 tests will be broken when 'delete all books' button is pressed! In this case: add a book to the data base, update id and title in /test/func_tests.js)."),o.a.createElement("li",null,"(To run tests: install mocha globally, type 'mocha' in the terminal)."),o.a.createElement("li",null,o.a.createElement("b",null,"REACT hooks Front-End implemented.")),o.a.createElement("li",null,o.a.createElement("b",null,"REDUX implemented."))),o.a.createElement("hr",null),o.a.createElement("h2",null,"Sample Front-End"),o.a.createElement(D,{addBook:function(e){fetch("/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}}),o.a.createElement("div",{className:"book-list"},t.map((function(e,t){return o.a.createElement(x,{index:t,key:t,book:e,dispComments:i})}))),o.a.createElement(C,{comments:n,addComment:s,deleteBook:c,books:t,deleteAllBooks:r}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(O.a,{store:w},o.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.200ede5a.chunk.js.map